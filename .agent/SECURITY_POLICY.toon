# SECURITY POLICY (TOON)

Este documento define os n√≠veis de autoriza√ß√£o para opera√ß√µes automatizadas dos agentes, visando reduzir interrup√ß√µes e manter a seguran√ßa do sistema.

## üõ°Ô∏è N√çVEIS DE OPERA√á√ÉO

### L0 - SANDBOX BARRIER (Auto-Block: TRUE)
Opera√ß√µes que tentam sair do diret√≥rio de trabalho montado.
- **Paths**: Qualquer uso de `..`, `/` (absoluto fora do mount), ou caminhos de rede.
- **A√ß√£o**: Bloqueio imediato e encerramento da tarefa com erro de seguran√ßa.

### L1 - SAFE (Auto-Run: TRUE)
Opera√ß√µes de leitura e descoberta que n√£o alteram o estado do sistema ou do c√≥digo fonte.
- **Git**: `log`, `status`, `diff`, `show`, `branch`.
- **FS**: `Get-ChildItem` (ls), `Get-Content` (cat), `Select-String` (grep), `Test-Path`.
- **An√°lise**: Diffs de arquivos, buscas por Regex, verifica√ß√£o de exist√™ncia.

### L2 - MANAGED (Auto-Run: TRUE + AUDIT)
Opera√ß√µes de escrita restritas a diret√≥rios de metadados ou controle de vers√£o b√°sico.
- **FS**: Escrita em `.agent/scripts/`, `.agent/knowledge/`, `.agent/tasks/`.
- **Git**: `git add`, `git commit`.
- **Logs**: Todas as a√ß√µes devem ser registradas no `PROJECT_STATUS.toon`.

### L3 - RESTRICTED (Auto-Run: FALSE)
Opera√ß√µes destrutivas ou que alteram infraestrutura e c√≥digo de produ√ß√£o.
- **FS**: `Remove-Item` (dele√ß√£o), `Set-Content` em arquivos fora do diret√≥rio `.agent`.
- **Docker**: `run`, `stop`, `rm`, `pull`.
- **Sistema**: Altera√ß√£o de vari√°veis de ambiente, configura√ß√µes de rede.

### L4 - EVOLUTION (Auto-Run: TRUE + AUDIT)
Opera√ß√µes de auto-modifica√ß√£o e otimiza√ß√£o do n√∫cleo do agente.
- **FS**: Escrita e Refatora√ß√£o em `.agent/toolbox/`.
- **Build**: Execu√ß√£o de `dotnet build` nos projetos dentro de `.agent/`.
- **Logs**: Otimiza√ß√µes devem ser registradas em `PERFORMANCE_LOG.toon`.

## üìú PROTOCOLO DE EXECU√á√ÉO
1. O agente deve validar o comando contra esta lista antes de chamar `run_command`.
2. Se o comando for L1 ou L2, o agente est√° autorizado a definir `SafeToAutoRun: true`.
3. Se for L3, a confirma√ß√£o do usu√°rio √© **obrigat√≥ria**.
