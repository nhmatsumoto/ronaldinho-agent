# SECURITY POLICY (TOON)

Este documento define os n√≠veis de autoriza√ß√£o para opera√ß√µes automatizadas dos agentes, visando reduzir interrup√ß√µes e manter a seguran√ßa do sistema.

## üõ°Ô∏è N√çVEIS DE OPERA√á√ÉO

### L0 - SANDBOX BARRIER (Auto-Block: TRUE)
Opera√ß√µes que tentam sair das √°reas autorizadas.
- **Authorized Paths**: `.agent/`, `workspace/`, `logs/`.
- **Forbidden**: Qualquer uso de `..`, caminhos absolutos fora do projeto ou escrita em arquivos de c√≥digo fonte fora de `workspace/`.
- **A√ß√£o**: Bloqueio imediato e encerramento da tarefa com erro de seguran√ßa.

### L1 - SAFE (Auto-Run: TRUE)
Opera√ß√µes de leitura e descoberta que n√£o alteram o estado do sistema ou do c√≥digo fonte.
- **Git**: `log`, `status`, `diff`, `show`, `branch`.
- **FS**: `Get-ChildItem` (ls), `Get-Content` (cat), `Select-String` (grep), `Test-Path`.
- **An√°lise**: Diffs de arquivos, buscas por Regex, verifica√ß√£o de exist√™ncia.

### L2 - MANAGED (Auto-Run: TRUE + AUDIT)
Opera√ß√µes de escrita restritas a diret√≥rios de metadados ou controle de vers√£o b√°sico.
- **FS**: Escrita em `.agent/scripts/`, `.agent/knowledge/`, `.agent/tasks/`.
- **Git**: `git add`, `git commit`.
- **Logs**: Todas as a√ß√µes devem ser registradas no `PROJECT_STATUS.toon`.

### L3 - RESTRICTED (Auto-Run: FALSE)
Opera√ß√µes destrutivas ou que alteram infraestrutura e c√≥digo de produ√ß√£o.
- **FS**: `Remove-Item` (dele√ß√£o), `Set-Content` em arquivos fora do diret√≥rio `.agent`.
- **Docker**: `run`, `stop`, `rm`, `pull`.
- **Sistema**: Altera√ß√£o de vari√°veis de ambiente, configura√ß√µes de rede.

### L4 - EVOLUTION (Auto-Run: TRUE + AUDIT)
Opera√ß√µes de auto-modifica√ß√£o e otimiza√ß√£o do n√∫cleo do agente.
- **FS**: Escrita e Refatora√ß√£o em `.agent/toolbox/`.
- **Build**: Execu√ß√£o de `dotnet build` nos projetos dentro de `.agent/`.
- **Logs**: Otimiza√ß√µes devem ser registradas em `PERFORMANCE_LOG.toon`.

## üåê WEB ACCESS WHITELIST
Para garantir a Governan√ßa (Regra #4), o Ronaldinho s√≥ pode acessar:
- `github.com` (Consultas de documenta√ß√£o)
- `pypi.org` (Verifica√ß√£o de pacotes)
- `pypi.org` (Verifica√ß√£o de pacotes)
- `google.com` (Buscas monitoradas)
- `slack.com`, `telegram.org` (APIs de comunica√ß√£o)

## üîë PRIVATE KEY POLICY
Conforme definido na miss√£o de Governan√ßa L4:
- **Zero-Retention**: O Ronaldinho **jamais** dever√° armazenar, salvar em disco ou publicar chaves privadas de usu√°rios em qualquer formato (logs, mem√≥ria ou relat√≥rios).
- **In-Memory Only**: Chaves fornecidas para opera√ß√µes de cifragem devem ser mantidas apenas em mem√≥ria vol√°til durante a execu√ß√£o da tarefa espec√≠fica e descartadas imediatamente ap√≥s.
- **Audit**: Qualquer tentativa de automatizar o armazenamento de chaves ser√° tratada como viola√ß√£o de seguran√ßa L0.

## üìú PROTOCOLO DE EXECU√á√ÉO
1. O agente deve validar o comando contra esta lista antes de chamar `run_command`.
2. Se o comando for L1 ou L2, o agente est√° autorizado a definir `SafeToAutoRun: true`.
3. Se for L3, a confirma√ß√£o do usu√°rio √© **obrigat√≥ria**.
